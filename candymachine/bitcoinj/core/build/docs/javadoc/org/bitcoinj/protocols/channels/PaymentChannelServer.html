<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.2) on Mon Mar 25 15:23:01 PDT 2019 -->
<title>PaymentChannelServer (bitcoinj-core 0.16-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2019-03-25">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PaymentChannelServer (bitcoinj-core 0.16-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.bitcoinj.protocols.channels</a></div>
<h2 title="Class PaymentChannelServer" class="title">Class PaymentChannelServer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.bitcoinj.protocols.channels.PaymentChannelServer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">PaymentChannelServer</span>
extends java.lang.Object</pre>
<div class="block"><p>A handler class which handles most of the complexity of creating a payment channel connection by providing a
 simple in/out interface which is provided with protobufs from the client and which generates protobufs which should
 be sent to the client.</p>

 <p>Does all required verification of messages and properly stores state objects in the wallet-attached
 <a href="StoredPaymentChannelServerStates.html" title="class in org.bitcoinj.protocols.channels"><code>StoredPaymentChannelServerStates</code></a> so that they are automatically closed when necessary and payment
 transactions are not lost if the application crashes before it unlocks.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="PaymentChannelServer.DefaultServerChannelProperties.html" title="class in org.bitcoinj.protocols.channels">PaymentChannelServer.DefaultServerChannelProperties</a></span></code></th>
<td class="colLast">
<div class="block">Extend this class and override the values you want to change.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="PaymentChannelServer.ServerChannelProperties.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerChannelProperties</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a></span></code></th>
<td class="colLast">
<div class="block">Implements the connection between this server and the client, providing an interface which allows messages to be
 sent to the client, requests for the connection to the client to be closed, and callbacks which occur when the
 channel is fully open or the client completes a payment.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_MAX_TIME_WINDOW">DEFAULT_MAX_TIME_WINDOW</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_MIN_TIME_WINDOW">DEFAULT_MIN_TIME_WINDOW</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#HARD_MIN_TIME_WINDOW">HARD_MIN_TIME_WINDOW</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.concurrent.locks.ReentrantLock</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lock">lock</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maxTimeWindow">maxTimeWindow</a></span></code></th>
<td class="colLast">
<div class="block">Maximum channel duration, in seconds, that the client can request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#minTimeWindow">minTimeWindow</a></span></code></th>
<td class="colLast">
<div class="block">Minimum channel duration, in seconds, that the client can request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.Integer,&#8203;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SERVER_VERSIONS">SERVER_VERSIONS</a></span></code></th>
<td class="colLast">
<div class="block">A map of supported versions; keys are major versions, and the corresponding
 value is the minor version at that major level.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.bitcoinj.core.TransactionBroadcaster,org.bitcoinj.wallet.Wallet,org.bitcoinj.core.Coin,org.bitcoinj.protocols.channels.PaymentChannelServer.ServerChannelProperties,org.bitcoinj.protocols.channels.PaymentChannelServer.ServerConnection)">PaymentChannelServer</a></span>&#8203;(<a href="../../core/TransactionBroadcaster.html" title="interface in org.bitcoinj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
                    <a href="../../wallet/Wallet.html" title="class in org.bitcoinj.wallet">Wallet</a>&nbsp;wallet,
                    <a href="../../core/Coin.html" title="class in org.bitcoinj.core">Coin</a>&nbsp;minAcceptedChannelSize,
                    <a href="PaymentChannelServer.ServerChannelProperties.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerChannelProperties</a>&nbsp;serverChannelProperties,
                    <a href="PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</code></th>
<td class="colLast">
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.bitcoinj.core.TransactionBroadcaster,org.bitcoinj.wallet.Wallet,org.bitcoinj.core.Coin,org.bitcoinj.protocols.channels.PaymentChannelServer.ServerConnection)">PaymentChannelServer</a></span>&#8203;(<a href="../../core/TransactionBroadcaster.html" title="interface in org.bitcoinj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
                    <a href="../../wallet/Wallet.html" title="class in org.bitcoinj.wallet">Wallet</a>&nbsp;wallet,
                    <a href="../../core/Coin.html" title="class in org.bitcoinj.core">Coin</a>&nbsp;minAcceptedChannelSize,
                    <a href="PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</code></th>
<td class="colLast">
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Closes the connection by generating a settle message for the client and calls
 <a href="PaymentChannelServer.ServerConnection.html#destroyConnection(org.bitcoinj.protocols.channels.PaymentChannelCloseException.CloseReason)"><code>PaymentChannelServer.ServerConnection.destroyConnection(PaymentChannelCloseException.CloseReason)</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectionClosed()">connectionClosed</a></span>()</code></th>
<td class="colLast">
<div class="block">Called when the connection terminates.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectionOpen()">connectionOpen</a></span>()</code></th>
<td class="colLast">
<div class="block">Called to indicate the connection has been opened and messages can now be generated for the client.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#receiveMessage(org.bitcoin.paymentchannel.Protos.TwoWayChannelMessage)">receiveMessage</a></span>&#8203;(<a href="../../../bitcoin/paymentchannel/Protos.TwoWayChannelMessage.html" title="class in org.bitcoin.paymentchannel">Protos.TwoWayChannelMessage</a>&nbsp;msg)</code></th>
<td class="colLast">
<div class="block">Called when a message is received from the client.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="PaymentChannelServerState.html" title="class in org.bitcoinj.protocols.channels">PaymentChannelServerState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#state()">state</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the underlying <a href="PaymentChannelServerState.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelServerState</code></a> object that is being manipulated.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="lock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>protected final&nbsp;java.util.concurrent.locks.ReentrantLock lock</pre>
</li>
</ul>
<a id="SERVER_VERSIONS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SERVER_VERSIONS</h4>
<pre>public static final&nbsp;java.util.Map&lt;java.lang.Integer,&#8203;java.lang.Integer&gt; SERVER_VERSIONS</pre>
<div class="block">A map of supported versions; keys are major versions, and the corresponding
 value is the minor version at that major level.</div>
</li>
</ul>
<a id="DEFAULT_MAX_TIME_WINDOW">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_TIME_WINDOW</h4>
<pre>public static final&nbsp;long DEFAULT_MAX_TIME_WINDOW</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.bitcoinj.protocols.channels.PaymentChannelServer.DEFAULT_MAX_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="maxTimeWindow">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxTimeWindow</h4>
<pre>protected final&nbsp;long maxTimeWindow</pre>
<div class="block">Maximum channel duration, in seconds, that the client can request. Defaults to 1 week.
 Note that the server needs to be online for the whole time the channel is open.
 Failure to do this could cause loss of all payments received on the channel.</div>
</li>
</ul>
<a id="DEFAULT_MIN_TIME_WINDOW">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MIN_TIME_WINDOW</h4>
<pre>public static final&nbsp;long DEFAULT_MIN_TIME_WINDOW</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.bitcoinj.protocols.channels.PaymentChannelServer.DEFAULT_MIN_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="HARD_MIN_TIME_WINDOW">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HARD_MIN_TIME_WINDOW</h4>
<pre>public static final&nbsp;long HARD_MIN_TIME_WINDOW</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.bitcoinj.protocols.channels.PaymentChannelServer.HARD_MIN_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="minTimeWindow">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>minTimeWindow</h4>
<pre>protected final&nbsp;long minTimeWindow</pre>
<div class="block">Minimum channel duration, in seconds, that the client can request. Should always be larger than  than 2 hours, defaults to 4 hours</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.bitcoinj.core.TransactionBroadcaster,org.bitcoinj.wallet.Wallet,org.bitcoinj.core.Coin,org.bitcoinj.protocols.channels.PaymentChannelServer.ServerConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PaymentChannelServer</h4>
<pre>public&nbsp;PaymentChannelServer&#8203;(<a href="../../core/TransactionBroadcaster.html" title="interface in org.bitcoinj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
                            <a href="../../wallet/Wallet.html" title="class in org.bitcoinj.wallet">Wallet</a>&nbsp;wallet,
                            <a href="../../core/Coin.html" title="class in org.bitcoinj.core">Coin</a>&nbsp;minAcceptedChannelSize,
                            <a href="PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</pre>
<div class="block">Creates a new server-side state manager which handles a single client connection. The server will only accept
 a channel with time window between 4 hours and 1 week. Note that the server need to be online for the whole time the channel is open.
 Failure to do this could cause loss of all payments received on the channel.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>broadcaster</code> - The PeerGroup on which transactions will be broadcast - should have multiple connections.</dd>
<dd><code>wallet</code> - The wallet which will be used to complete transactions.
               Unlike <a href="PaymentChannelClient.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelClient</code></a>, this does not have to already contain a StoredState manager</dd>
<dd><code>minAcceptedChannelSize</code> - The minimum value the client must lock into this channel. A value too large will be
                               rejected by clients, and a value too low will require excessive channel reopening
                               and may cause fees to be require to settle the channel. A reasonable value depends
                               entirely on the expected maximum for the channel, and should likely be somewhere
                               between a few bitcents and a bitcoin.</dd>
<dd><code>conn</code> - A callback listener which represents the connection to the client (forwards messages we generate to
             the client and will close the connection on request)</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(org.bitcoinj.core.TransactionBroadcaster,org.bitcoinj.wallet.Wallet,org.bitcoinj.core.Coin,org.bitcoinj.protocols.channels.PaymentChannelServer.ServerChannelProperties,org.bitcoinj.protocols.channels.PaymentChannelServer.ServerConnection)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PaymentChannelServer</h4>
<pre>public&nbsp;PaymentChannelServer&#8203;(<a href="../../core/TransactionBroadcaster.html" title="interface in org.bitcoinj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
                            <a href="../../wallet/Wallet.html" title="class in org.bitcoinj.wallet">Wallet</a>&nbsp;wallet,
                            <a href="../../core/Coin.html" title="class in org.bitcoinj.core">Coin</a>&nbsp;minAcceptedChannelSize,
                            <a href="PaymentChannelServer.ServerChannelProperties.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerChannelProperties</a>&nbsp;serverChannelProperties,
                            <a href="PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</pre>
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>broadcaster</code> - The PeerGroup on which transactions will be broadcast - should have multiple connections.</dd>
<dd><code>wallet</code> - The wallet which will be used to complete transactions.
               Unlike <a href="PaymentChannelClient.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelClient</code></a>, this does not have to already contain a StoredState manager</dd>
<dd><code>minAcceptedChannelSize</code> - The minimum value the client must lock into this channel. A value too large will be
                               rejected by clients, and a value too low will require excessive channel reopening
                               and may cause fees to be require to settle the channel. A reasonable value depends
                               entirely on the expected maximum for the channel, and should likely be somewhere
                               between a few bitcents and a bitcoin.</dd>
<dd><code>serverChannelProperties</code> - Modify the channel's properties. You may extend <a href="PaymentChannelServer.DefaultServerChannelProperties.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelServer.DefaultServerChannelProperties</code></a></dd>
<dd><code>conn</code> - A callback listener which represents the connection to the client (forwards messages we generate to
              the client and will close the connection on request)</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="state()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre class="methodSignature">@Nullable
public&nbsp;<a href="PaymentChannelServerState.html" title="class in org.bitcoinj.protocols.channels">PaymentChannelServerState</a>&nbsp;state()</pre>
<div class="block">Returns the underlying <a href="PaymentChannelServerState.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelServerState</code></a> object that is being manipulated. This object allows
 you to learn how much money has been transferred, etc. May be null if the channel wasn't negotiated yet.</div>
</li>
</ul>
<a id="receiveMessage(org.bitcoin.paymentchannel.Protos.TwoWayChannelMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveMessage</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;receiveMessage&#8203;(<a href="../../../bitcoin/paymentchannel/Protos.TwoWayChannelMessage.html" title="class in org.bitcoin.paymentchannel">Protos.TwoWayChannelMessage</a>&nbsp;msg)</pre>
<div class="block">Called when a message is received from the client. Processes the given message and generates events based on its
 content.</div>
</li>
</ul>
<a id="connectionClosed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectionClosed</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;connectionClosed()</pre>
<div class="block"><p>Called when the connection terminates. Notifies the <a href="StoredServerChannel.html" title="class in org.bitcoinj.protocols.channels"><code>StoredServerChannel</code></a> object that we can attempt to
 resume this channel in the future and stops generating messages for the client.</p>

 <p>Note that this <b>MUST</b> still be called even after either
 <a href="PaymentChannelServer.ServerConnection.html#destroyConnection(org.bitcoinj.protocols.channels.PaymentChannelCloseException.CloseReason)"><code>PaymentChannelServer.ServerConnection.destroyConnection(PaymentChannelCloseException.CloseReason)</code></a> or
 <a href="#close()"><code>close()</code></a> is called to actually handle the connection close logic.</p></div>
</li>
</ul>
<a id="connectionOpen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectionOpen</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;connectionOpen()</pre>
<div class="block">Called to indicate the connection has been opened and messages can now be generated for the client.</div>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()</pre>
<div class="block"><p>Closes the connection by generating a settle message for the client and calls
 <a href="PaymentChannelServer.ServerConnection.html#destroyConnection(org.bitcoinj.protocols.channels.PaymentChannelCloseException.CloseReason)"><code>PaymentChannelServer.ServerConnection.destroyConnection(PaymentChannelCloseException.CloseReason)</code></a>. Note that this does not broadcast
 the payment transaction and the client may still resume the same channel if they reconnect</p>
 <p>
 <p>Note that <a href="#connectionClosed()"><code>connectionClosed()</code></a> must still be called after the connection fully
 closes.</p></div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
